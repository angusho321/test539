# 📅 每日自動化流程時間表

## ⏰ 雙時段執行時間

### 🌅 上午 9:00 (台灣時間) - 預測階段
- **UTC 時間**: 01:00
- **Cron 表達式**: `0 1 * * *`
- **執行內容**: 生成當日預測號碼

### 🌙 晚上 10:00 (台灣時間) - 記錄驗證階段
- **UTC 時間**: 14:00  
- **Cron 表達式**: `0 14 * * *`
- **執行內容**: 爬取開獎結果、驗證預測

## 📋 詳細執行流程

### 🌅 上午流程 (09:00)
1. **⬇️ 下載歷史資料**
   - 從 Google Drive 下載 `lottery_hist.xlsx`
   - 檢查檔案完整性

2. **📊 執行預測分析**
   - **智能選號**: 基於歷史統計模式
   - **平衡策略**: 結合熱號、冷號
   - **隨機選號**: 完全隨機
   - **熱號優先**: 偏向高頻號碼
   - **冷號優先**: 偏向低頻號碼

3. **⬆️ 上傳預測結果**
   - 更新 Google Drive 中的 `prediction_log.xlsx`
   - 標記為待驗證狀態

4. **📁 備份預測記錄**
   - GitHub Actions 保存預測日誌

### 🌙 晚上流程 (22:00)
1. **🎯 爬取最新開獎結果**
   - 自動爬取 539 官方開獎資料
   - 更新開獎歷史檔案

2. **⬆️ 更新開獎歷史**
   - 上傳更新的 `lottery_hist.xlsx` 到 Google Drive

3. **⬇️ 下載預測記錄**
   - 取得當日的預測記錄

4. **🔍 驗證預測結果**
   - 比對預測號碼與開獎結果
   - 計算中獎號碼數量
   - 更新驗證狀態

5. **⬆️ 上傳驗證結果**
   - 更新帶有驗證結果的預測記錄

6. **📁 備份完整記錄**
   - GitHub Actions 保存驗證日誌

## 🗓️ 週日特殊處理

### 📅 週日行為
- ⏸️ **上午跳過預測** - 週日無開獎，留給週一預測
- ⏸️ **晚上跳過驗證** - 週日無開獎結果
- 🛌 **完全休息** - 系統不執行任何動作

### 🔄 週一重新開始
- 週一上午會重新開始預測週期
- 週一晚上會驗證週六的預測結果

## 📊 出國期間運作

### 🌍 完全自動化
您出國 20 天期間，系統將：

| 日期 | 預測 | 驗證 | 說明 |
|------|------|------|------|
| 週一-週六 | ✅ | ✅ | 正常運作 |
| 週日 | ⏸️ | ⏸️ | 完全休息 |

### 📱 監控建議
1. **GitHub 通知**: 設定 Actions 失敗通知
2. **Google Drive**: 定期檢查檔案更新
3. **手機 App**: GitHub mobile app 查看執行狀態

## 🔧 故障自動處理

### ⚡ 自動重試機制
- 檔案下載失敗: 自動重試
- API 限制: 指數退避重試
- 暫時性錯誤: 記錄但繼續執行

### 📞 通知機制
- ✅ 成功: 靜默執行
- ⚠️ 警告: 記錄到日誌
- ❌ 失敗: GitHub 通知（如已設定）

## 🎯 關鍵時間點

- **08:30**: 系統開始準備
- **09:00**: 正式開始執行
- **09:05**: 通常完成所有步驟
- **09:10**: 最晚完成時間

**🎉 現在您可以安心出國，系統會自動運作 20 天！**
