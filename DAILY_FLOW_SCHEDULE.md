# 📅 每日自動化流程時間表

## ⏰ 單一時段執行時間

### 🌅 上午 9:00 (台灣時間) - 完整流程
- **UTC 時間**: 01:00
- **Cron 表達式**: `0 1 * * *`
- **執行內容**: 記錄開獎+驗證昨日+預測今日

## 📋 詳細執行流程

### 🌅 早上完整流程 (09:00)

#### 步驟 1: 記錄昨天的開獎號碼
1. **⬇️ 下載歷史資料**
   - 從 Google Drive 下載 `lottery_hist.xlsx`
   - 檢查檔案完整性

2. **🎯 爬取最新開獎結果**
   - 自動爬取 539 官方開獎資料
   - 更新開獎歷史檔案

3. **⬆️ 更新開獎歷史**
   - 上傳更新的 `lottery_hist.xlsx` 到 Google Drive

#### 步驟 2: 驗證昨日的預測
4. **⬇️ 下載預測記錄**
   - 取得昨日的預測記錄

5. **🔍 驗證預測結果**
   - 比對預測號碼與開獎結果
   - 計算中獎號碼數量
   - 更新驗證狀態

#### 步驟 3: 預測今日的號碼
6. **📊 執行今日預測分析**
   - **智能選號**: 基於歷史統計模式
   - **平衡策略**: 結合熱號、冷號
   - **隨機選號**: 完全隨機
   - **熱號優先**: 偏向高頻號碼
   - **冷號優先**: 偏向低頻號碼
   - **未開組合**: 從未開出的號碼組合

7. **⬆️ 上傳所有結果**
   - 更新 Google Drive 中的 `prediction_log.xlsx`
   - 包含驗證結果和今日預測

8. **📁 備份完整記錄**
   - GitHub Actions 保存完整日誌

## 🗓️ 週日特殊處理

### 📅 週日行為
- ⏸️ **完全跳過** - 週日無開獎，系統不執行任何動作
- 🛌 **完全休息** - 留給週一重新開始

### 🔄 週一重新開始
- 週一上午會記錄週六的開獎結果
- 週一上午會驗證週六的預測結果
- 週一上午會預測週一的號碼

## 📊 出國期間運作

### 🌍 完全自動化
您出國 20 天期間，系統將：

| 日期 | 記錄開獎 | 驗證昨日 | 預測今日 | 說明 |
|------|----------|----------|----------|------|
| 週一-週六 | ✅ | ✅ | ✅ | 完整流程 |
| 週日 | ⏸️ | ⏸️ | ⏸️ | 完全休息 |

### 📱 監控建議
1. **GitHub 通知**: 設定 Actions 失敗通知
2. **Google Drive**: 定期檢查檔案更新
3. **手機 App**: GitHub mobile app 查看執行狀態

## 🔧 故障自動處理

### ⚡ 自動重試機制
- 檔案下載失敗: 自動重試
- API 限制: 指數退避重試
- 暫時性錯誤: 記錄但繼續執行

### 📞 通知機制
- ✅ 成功: 靜默執行
- ⚠️ 警告: 記錄到日誌
- ❌ 失敗: GitHub 通知（如已設定）

## 🎯 關鍵時間點

- **08:30**: 系統開始準備
- **09:00**: 正式開始執行
- **09:05**: 記錄開獎完成
- **09:08**: 驗證昨日完成
- **09:10**: 預測今日完成
- **09:12**: 上傳結果完成
- **09:15**: 最晚完成時間

## 📈 執行效率提升

### ⚡ 優化後的優勢
- **單一執行**: 減少 GitHub Actions 資源消耗
- **完整流程**: 一次完成所有必要步驟
- **數據一致性**: 避免跨時段數據不同步
- **簡化監控**: 只需關注一個執行時間點

**🎉 現在您可以安心出國，系統會自動運作 20 天！**
